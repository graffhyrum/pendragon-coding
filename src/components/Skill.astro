---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

interface Props {
	s: {
		title: string;
		imagePath: string;
		img_alt: string;
		skill_doc_link: string;
	};
	index?: number;
	noAnimation?: boolean;
}
const { s, index = 0, noAnimation = false } = Astro.props;
const delayClass = `delay-${Math.min(index * 100, 400)}`;
const images = import.meta.glob<{ default: ImageMetadata }>(
	'/src/assets/*.{jpeg,jpg,png,gif,webp}',
);
if (!images[`/src/assets/${s.imagePath}`])
	throw new Error(
		`"${s.imagePath}" does not exist in glob\nList: ${Object.keys(images)}`,
	);
---

<li class={`flex items-center justify-between gap-4 p-1 ${noAnimation ? '' : `animate-scale-in ${delayClass} opacity-0`} hover:bg-green-900/20 rounded-lg transition-all duration-300 hover:scale-105 focus-within:bg-green-900/20 focus-within:scale-105 group`}>
	<Image
		src={images[`/src/assets/${s.imagePath}`]()}
		alt={s.img_alt}
		class="w-10 h-auto object-contain transition-transform duration-300 group-hover:rotate-12 group-hover:scale-110 group-focus-within:rotate-12 group-focus-within:scale-110"
	/>
	<p class="text-xl flex-1 text-left m-0">
		{s.skill_doc_link ? <a href={s.skill_doc_link}>{s.title}</a> : s.title}
	</p>
</li>
